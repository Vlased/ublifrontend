const React = require('react');
const importJsx = require('import-jsx');
const {
  Static,
  Box
} = require('ink');
const {
  STATUS_NOT_STARTED,
  STATUS_RUNNING,
  STATUS_SUCCEEDED,
  STATUS_FAILED
} = require('../../task-runner');
const {
  TASK_TYPE_PREPARE,
  TASK_TYPE_START,
  TASK_TYPE_FETCH_STORIES,
  TASK_TYPE_TESTS,
  TASK_TYPE_TEST,
  TASK_TYPE_STOP
} = require('../../constants');
const Task = importJsx('./Task');
const FailedTest = importJsx('./FailedTest');
const collectRecursively = (predicate, tasks, collection = []) => {
  for (let i = 0; i < tasks.length; i++) {
    const task = tasks[i];
    if (predicate(task)) {
      collection.push(task);
    }
    if (task.tasks) {
      return collectRecursively(predicate, task.tasks, collection);
    }
  }
  return collection;
};
const isRunningTest = task => task.status === STATUS_RUNNING && task.meta.type === TASK_TYPE_TEST;
const isCompletedTest = task => (task.status === STATUS_FAILED || task.status === STATUS_SUCCEEDED) && task.meta.type === TASK_TYPE_TEST;
const isFailedTest = task => task.status === STATUS_FAILED && task.meta.type === TASK_TYPE_TEST;
const isFailedTask = task => task.status === STATUS_FAILED && task.meta.type !== TASK_TYPE_TESTS;
const groupByKind = testTasks => testTasks.reduce((acc, task) => {
  const key = `${task.meta.target}/${task.meta.configuration}/${task.meta.kind}`;
  if (!acc[key]) {
    acc[key] = {
      target: task.meta.target,
      configuration: task.meta.configuration,
      kind: task.meta.kind,
      tasks: []
    };
  }
  acc[key].tasks.push(task);
  return acc;
}, {});
const KindTask = ({
  status,
  target,
  configuration,
  kind
}) => /*#__PURE__*/React.createElement(Task, {
  status: status,
  prefix: `${target}/${configuration}/`,
  title: kind
});
const TARGET_TASK_TITLE_MAP = {
  [TASK_TYPE_PREPARE]: 'Preparing',
  [TASK_TYPE_START]: 'Starting',
  [TASK_TYPE_FETCH_STORIES]: 'Fetching stories',
  [TASK_TYPE_TESTS]: 'Running tests',
  [TASK_TYPE_STOP]: 'Stopping'
};
const TargetTask = ({
  status,
  target,
  tasks
}) => {
  const currentTask = tasks && tasks.find(task => task.status === STATUS_NOT_STARTED || task.status === STATUS_RUNNING);
  const taskTitle = currentTask && TARGET_TASK_TITLE_MAP[currentTask.meta.type];
  const failedTasks = (tasks || []).filter(isFailedTask);
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Task, {
    status: status,
    title: `${target}${status !== STATUS_FAILED && taskTitle ? `: ${taskTitle}` : ''}`
  }), failedTasks.map(task => /*#__PURE__*/React.createElement(FailedTest, {
    key: task.id,
    title: TARGET_TASK_TITLE_MAP[task.meta.type],
    error: task.error
  })));
};
const renderFailedTasks = tasks => tasks.filter(isFailedTest).map(task => /*#__PURE__*/React.createElement(FailedTest, {
  key: task.id,
  title: task.meta.story,
  error: task.error
}));
const renderKind = ({
  key,
  status,
  target,
  configuration,
  kind,
  tasks
}) => /*#__PURE__*/React.createElement(React.Fragment, {
  key: key
}, /*#__PURE__*/React.createElement(KindTask, {
  status: status,
  target: target,
  configuration: configuration,
  kind: kind
}), renderFailedTasks(tasks));
const renderKinds = kinds => kinds.map(renderKind);
const TaskList = ({
  tasks
}) => {
  const runningGrouped = groupByKind(collectRecursively(isRunningTest, tasks));
  const running = Object.keys(runningGrouped).map(key => ({
    key,
    ...runningGrouped[key],
    status: STATUS_RUNNING
  }));
  const completedGrouped = groupByKind(collectRecursively(isCompletedTest, tasks));
  const completed = Object.keys(completedGrouped).filter(key => !runningGrouped[key]).map(key => ({
    key,
    ...completedGrouped[key],
    status: completedGrouped[key].tasks.find(test => test.status === STATUS_FAILED) ? STATUS_FAILED : STATUS_SUCCEEDED,
    completedAt: completedGrouped[key].tasks.reduce((acc, task) => Math.max(acc, task.completedAt), 0)
  })).sort((a, b) => a.completedAt - b.completedAt);
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: "column"
  }, /*#__PURE__*/React.createElement(Static, {
    items: completed
  }, renderKind), renderKinds(running), tasks.map(task => /*#__PURE__*/React.createElement(TargetTask, {
    key: task.id,
    status: task.status,
    target: task.id,
    tasks: task.tasks
  })));
};
module.exports = TaskList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJpbXBvcnRKc3giLCJTdGF0aWMiLCJCb3giLCJTVEFUVVNfTk9UX1NUQVJURUQiLCJTVEFUVVNfUlVOTklORyIsIlNUQVRVU19TVUNDRUVERUQiLCJTVEFUVVNfRkFJTEVEIiwiVEFTS19UWVBFX1BSRVBBUkUiLCJUQVNLX1RZUEVfU1RBUlQiLCJUQVNLX1RZUEVfRkVUQ0hfU1RPUklFUyIsIlRBU0tfVFlQRV9URVNUUyIsIlRBU0tfVFlQRV9URVNUIiwiVEFTS19UWVBFX1NUT1AiLCJUYXNrIiwiRmFpbGVkVGVzdCIsImNvbGxlY3RSZWN1cnNpdmVseSIsInByZWRpY2F0ZSIsInRhc2tzIiwiY29sbGVjdGlvbiIsImkiLCJsZW5ndGgiLCJ0YXNrIiwicHVzaCIsImlzUnVubmluZ1Rlc3QiLCJzdGF0dXMiLCJtZXRhIiwidHlwZSIsImlzQ29tcGxldGVkVGVzdCIsImlzRmFpbGVkVGVzdCIsImlzRmFpbGVkVGFzayIsImdyb3VwQnlLaW5kIiwidGVzdFRhc2tzIiwicmVkdWNlIiwiYWNjIiwia2V5IiwidGFyZ2V0IiwiY29uZmlndXJhdGlvbiIsImtpbmQiLCJLaW5kVGFzayIsImNyZWF0ZUVsZW1lbnQiLCJwcmVmaXgiLCJ0aXRsZSIsIlRBUkdFVF9UQVNLX1RJVExFX01BUCIsIlRhcmdldFRhc2siLCJjdXJyZW50VGFzayIsImZpbmQiLCJ0YXNrVGl0bGUiLCJmYWlsZWRUYXNrcyIsImZpbHRlciIsIkZyYWdtZW50IiwibWFwIiwiaWQiLCJlcnJvciIsInJlbmRlckZhaWxlZFRhc2tzIiwic3RvcnkiLCJyZW5kZXJLaW5kIiwicmVuZGVyS2luZHMiLCJraW5kcyIsIlRhc2tMaXN0IiwicnVubmluZ0dyb3VwZWQiLCJydW5uaW5nIiwiT2JqZWN0Iiwia2V5cyIsImNvbXBsZXRlZEdyb3VwZWQiLCJjb21wbGV0ZWQiLCJ0ZXN0IiwiY29tcGxldGVkQXQiLCJNYXRoIiwibWF4Iiwic29ydCIsImEiLCJiIiwiZmxleERpcmVjdGlvbiIsIml0ZW1zIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlRhc2tMaXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IGltcG9ydEpzeCA9IHJlcXVpcmUoJ2ltcG9ydC1qc3gnKTtcbmNvbnN0IHsgU3RhdGljLCBCb3ggfSA9IHJlcXVpcmUoJ2luaycpO1xuY29uc3Qge1xuICBTVEFUVVNfTk9UX1NUQVJURUQsXG4gIFNUQVRVU19SVU5OSU5HLFxuICBTVEFUVVNfU1VDQ0VFREVELFxuICBTVEFUVVNfRkFJTEVELFxufSA9IHJlcXVpcmUoJy4uLy4uL3Rhc2stcnVubmVyJyk7XG5jb25zdCB7XG4gIFRBU0tfVFlQRV9QUkVQQVJFLFxuICBUQVNLX1RZUEVfU1RBUlQsXG4gIFRBU0tfVFlQRV9GRVRDSF9TVE9SSUVTLFxuICBUQVNLX1RZUEVfVEVTVFMsXG4gIFRBU0tfVFlQRV9URVNULFxuICBUQVNLX1RZUEVfU1RPUCxcbn0gPSByZXF1aXJlKCcuLi8uLi9jb25zdGFudHMnKTtcblxuY29uc3QgVGFzayA9IGltcG9ydEpzeCgnLi9UYXNrJyk7XG5jb25zdCBGYWlsZWRUZXN0ID0gaW1wb3J0SnN4KCcuL0ZhaWxlZFRlc3QnKTtcblxuY29uc3QgY29sbGVjdFJlY3Vyc2l2ZWx5ID0gKHByZWRpY2F0ZSwgdGFza3MsIGNvbGxlY3Rpb24gPSBbXSkgPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdGFzayA9IHRhc2tzW2ldO1xuICAgIGlmIChwcmVkaWNhdGUodGFzaykpIHtcbiAgICAgIGNvbGxlY3Rpb24ucHVzaCh0YXNrKTtcbiAgICB9XG4gICAgaWYgKHRhc2sudGFza3MpIHtcbiAgICAgIHJldHVybiBjb2xsZWN0UmVjdXJzaXZlbHkocHJlZGljYXRlLCB0YXNrLnRhc2tzLCBjb2xsZWN0aW9uKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbGxlY3Rpb247XG59O1xuXG5jb25zdCBpc1J1bm5pbmdUZXN0ID0gKHRhc2spID0+XG4gIHRhc2suc3RhdHVzID09PSBTVEFUVVNfUlVOTklORyAmJiB0YXNrLm1ldGEudHlwZSA9PT0gVEFTS19UWVBFX1RFU1Q7XG5cbmNvbnN0IGlzQ29tcGxldGVkVGVzdCA9ICh0YXNrKSA9PlxuICAodGFzay5zdGF0dXMgPT09IFNUQVRVU19GQUlMRUQgfHwgdGFzay5zdGF0dXMgPT09IFNUQVRVU19TVUNDRUVERUQpICYmXG4gIHRhc2subWV0YS50eXBlID09PSBUQVNLX1RZUEVfVEVTVDtcblxuY29uc3QgaXNGYWlsZWRUZXN0ID0gKHRhc2spID0+XG4gIHRhc2suc3RhdHVzID09PSBTVEFUVVNfRkFJTEVEICYmIHRhc2subWV0YS50eXBlID09PSBUQVNLX1RZUEVfVEVTVDtcblxuY29uc3QgaXNGYWlsZWRUYXNrID0gKHRhc2spID0+XG4gIHRhc2suc3RhdHVzID09PSBTVEFUVVNfRkFJTEVEICYmIHRhc2subWV0YS50eXBlICE9PSBUQVNLX1RZUEVfVEVTVFM7XG5cbmNvbnN0IGdyb3VwQnlLaW5kID0gKHRlc3RUYXNrcykgPT5cbiAgdGVzdFRhc2tzLnJlZHVjZSgoYWNjLCB0YXNrKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gYCR7dGFzay5tZXRhLnRhcmdldH0vJHt0YXNrLm1ldGEuY29uZmlndXJhdGlvbn0vJHt0YXNrLm1ldGEua2luZH1gO1xuICAgIGlmICghYWNjW2tleV0pIHtcbiAgICAgIGFjY1trZXldID0ge1xuICAgICAgICB0YXJnZXQ6IHRhc2subWV0YS50YXJnZXQsXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IHRhc2subWV0YS5jb25maWd1cmF0aW9uLFxuICAgICAgICBraW5kOiB0YXNrLm1ldGEua2luZCxcbiAgICAgICAgdGFza3M6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gICAgYWNjW2tleV0udGFza3MucHVzaCh0YXNrKTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG5cbmNvbnN0IEtpbmRUYXNrID0gKHsgc3RhdHVzLCB0YXJnZXQsIGNvbmZpZ3VyYXRpb24sIGtpbmQgfSkgPT4gKFxuICA8VGFzayBzdGF0dXM9e3N0YXR1c30gcHJlZml4PXtgJHt0YXJnZXR9LyR7Y29uZmlndXJhdGlvbn0vYH0gdGl0bGU9e2tpbmR9IC8+XG4pO1xuXG5jb25zdCBUQVJHRVRfVEFTS19USVRMRV9NQVAgPSB7XG4gIFtUQVNLX1RZUEVfUFJFUEFSRV06ICdQcmVwYXJpbmcnLFxuICBbVEFTS19UWVBFX1NUQVJUXTogJ1N0YXJ0aW5nJyxcbiAgW1RBU0tfVFlQRV9GRVRDSF9TVE9SSUVTXTogJ0ZldGNoaW5nIHN0b3JpZXMnLFxuICBbVEFTS19UWVBFX1RFU1RTXTogJ1J1bm5pbmcgdGVzdHMnLFxuICBbVEFTS19UWVBFX1NUT1BdOiAnU3RvcHBpbmcnLFxufTtcbmNvbnN0IFRhcmdldFRhc2sgPSAoeyBzdGF0dXMsIHRhcmdldCwgdGFza3MgfSkgPT4ge1xuICBjb25zdCBjdXJyZW50VGFzayA9XG4gICAgdGFza3MgJiZcbiAgICB0YXNrcy5maW5kKFxuICAgICAgKHRhc2spID0+XG4gICAgICAgIHRhc2suc3RhdHVzID09PSBTVEFUVVNfTk9UX1NUQVJURUQgfHwgdGFzay5zdGF0dXMgPT09IFNUQVRVU19SVU5OSU5HXG4gICAgKTtcbiAgY29uc3QgdGFza1RpdGxlID0gY3VycmVudFRhc2sgJiYgVEFSR0VUX1RBU0tfVElUTEVfTUFQW2N1cnJlbnRUYXNrLm1ldGEudHlwZV07XG4gIGNvbnN0IGZhaWxlZFRhc2tzID0gKHRhc2tzIHx8IFtdKS5maWx0ZXIoaXNGYWlsZWRUYXNrKTtcblxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIDxUYXNrXG4gICAgICAgIHN0YXR1cz17c3RhdHVzfVxuICAgICAgICB0aXRsZT17YCR7dGFyZ2V0fSR7XG4gICAgICAgICAgc3RhdHVzICE9PSBTVEFUVVNfRkFJTEVEICYmIHRhc2tUaXRsZSA/IGA6ICR7dGFza1RpdGxlfWAgOiAnJ1xuICAgICAgICB9YH1cbiAgICAgIC8+XG4gICAgICB7ZmFpbGVkVGFza3MubWFwKCh0YXNrKSA9PiAoXG4gICAgICAgIDxGYWlsZWRUZXN0XG4gICAgICAgICAga2V5PXt0YXNrLmlkfVxuICAgICAgICAgIHRpdGxlPXtUQVJHRVRfVEFTS19USVRMRV9NQVBbdGFzay5tZXRhLnR5cGVdfVxuICAgICAgICAgIGVycm9yPXt0YXNrLmVycm9yfVxuICAgICAgICAvPlxuICAgICAgKSl9XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKTtcbn07XG5cbmNvbnN0IHJlbmRlckZhaWxlZFRhc2tzID0gKHRhc2tzKSA9PlxuICB0YXNrc1xuICAgIC5maWx0ZXIoaXNGYWlsZWRUZXN0KVxuICAgIC5tYXAoKHRhc2spID0+IChcbiAgICAgIDxGYWlsZWRUZXN0IGtleT17dGFzay5pZH0gdGl0bGU9e3Rhc2subWV0YS5zdG9yeX0gZXJyb3I9e3Rhc2suZXJyb3J9IC8+XG4gICAgKSk7XG5cbmNvbnN0IHJlbmRlcktpbmQgPSAoeyBrZXksIHN0YXR1cywgdGFyZ2V0LCBjb25maWd1cmF0aW9uLCBraW5kLCB0YXNrcyB9KSA9PiAoXG4gIDxSZWFjdC5GcmFnbWVudCBrZXk9e2tleX0+XG4gICAgPEtpbmRUYXNrXG4gICAgICBzdGF0dXM9e3N0YXR1c31cbiAgICAgIHRhcmdldD17dGFyZ2V0fVxuICAgICAgY29uZmlndXJhdGlvbj17Y29uZmlndXJhdGlvbn1cbiAgICAgIGtpbmQ9e2tpbmR9XG4gICAgLz5cbiAgICB7cmVuZGVyRmFpbGVkVGFza3ModGFza3MpfVxuICA8L1JlYWN0LkZyYWdtZW50PlxuKTtcblxuY29uc3QgcmVuZGVyS2luZHMgPSAoa2luZHMpID0+IGtpbmRzLm1hcChyZW5kZXJLaW5kKTtcblxuY29uc3QgVGFza0xpc3QgPSAoeyB0YXNrcyB9KSA9PiB7XG4gIGNvbnN0IHJ1bm5pbmdHcm91cGVkID0gZ3JvdXBCeUtpbmQoY29sbGVjdFJlY3Vyc2l2ZWx5KGlzUnVubmluZ1Rlc3QsIHRhc2tzKSk7XG4gIGNvbnN0IHJ1bm5pbmcgPSBPYmplY3Qua2V5cyhydW5uaW5nR3JvdXBlZCkubWFwKChrZXkpID0+ICh7XG4gICAga2V5LFxuICAgIC4uLnJ1bm5pbmdHcm91cGVkW2tleV0sXG4gICAgc3RhdHVzOiBTVEFUVVNfUlVOTklORyxcbiAgfSkpO1xuXG4gIGNvbnN0IGNvbXBsZXRlZEdyb3VwZWQgPSBncm91cEJ5S2luZChcbiAgICBjb2xsZWN0UmVjdXJzaXZlbHkoaXNDb21wbGV0ZWRUZXN0LCB0YXNrcylcbiAgKTtcbiAgY29uc3QgY29tcGxldGVkID0gT2JqZWN0LmtleXMoY29tcGxldGVkR3JvdXBlZClcbiAgICAuZmlsdGVyKChrZXkpID0+ICFydW5uaW5nR3JvdXBlZFtrZXldKVxuICAgIC5tYXAoKGtleSkgPT4gKHtcbiAgICAgIGtleSxcbiAgICAgIC4uLmNvbXBsZXRlZEdyb3VwZWRba2V5XSxcbiAgICAgIHN0YXR1czogY29tcGxldGVkR3JvdXBlZFtrZXldLnRhc2tzLmZpbmQoXG4gICAgICAgICh0ZXN0KSA9PiB0ZXN0LnN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxFRFxuICAgICAgKVxuICAgICAgICA/IFNUQVRVU19GQUlMRURcbiAgICAgICAgOiBTVEFUVVNfU1VDQ0VFREVELFxuICAgICAgY29tcGxldGVkQXQ6IGNvbXBsZXRlZEdyb3VwZWRba2V5XS50YXNrcy5yZWR1Y2UoXG4gICAgICAgIChhY2MsIHRhc2spID0+IE1hdGgubWF4KGFjYywgdGFzay5jb21wbGV0ZWRBdCksXG4gICAgICAgIDBcbiAgICAgICksXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGEuY29tcGxldGVkQXQgLSBiLmNvbXBsZXRlZEF0KTtcblxuICByZXR1cm4gKFxuICAgIDxCb3ggZmxleERpcmVjdGlvbj1cImNvbHVtblwiPlxuICAgICAgPFN0YXRpYyBpdGVtcz17Y29tcGxldGVkfT57cmVuZGVyS2luZH08L1N0YXRpYz5cbiAgICAgIHtyZW5kZXJLaW5kcyhydW5uaW5nKX1cbiAgICAgIHt0YXNrcy5tYXAoKHRhc2spID0+IChcbiAgICAgICAgPFRhcmdldFRhc2tcbiAgICAgICAgICBrZXk9e3Rhc2suaWR9XG4gICAgICAgICAgc3RhdHVzPXt0YXNrLnN0YXR1c31cbiAgICAgICAgICB0YXJnZXQ9e3Rhc2suaWR9XG4gICAgICAgICAgdGFza3M9e3Rhc2sudGFza3N9XG4gICAgICAgIC8+XG4gICAgICApKX1cbiAgICA8L0JveD5cbiAgKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVGFza0xpc3Q7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixNQUFNQyxTQUFTLEdBQUdELE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDdkMsTUFBTTtFQUFFRSxNQUFNO0VBQUVDO0FBQUksQ0FBQyxHQUFHSCxPQUFPLENBQUMsS0FBSyxDQUFDO0FBQ3RDLE1BQU07RUFDSkksa0JBQWtCO0VBQ2xCQyxjQUFjO0VBQ2RDLGdCQUFnQjtFQUNoQkM7QUFDRixDQUFDLEdBQUdQLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUNoQyxNQUFNO0VBQ0pRLGlCQUFpQjtFQUNqQkMsZUFBZTtFQUNmQyx1QkFBdUI7RUFDdkJDLGVBQWU7RUFDZkMsY0FBYztFQUNkQztBQUNGLENBQUMsR0FBR2IsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBRTlCLE1BQU1jLElBQUksR0FBR2IsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNYyxVQUFVLEdBQUdkLFNBQVMsQ0FBQyxjQUFjLENBQUM7QUFFNUMsTUFBTWUsa0JBQWtCLEdBQUdBLENBQUNDLFNBQVMsRUFBRUMsS0FBSyxFQUFFQyxVQUFVLEdBQUcsRUFBRSxLQUFLO0VBQ2hFLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRixLQUFLLENBQUNHLE1BQU0sRUFBRUQsQ0FBQyxFQUFFLEVBQUU7SUFDckMsTUFBTUUsSUFBSSxHQUFHSixLQUFLLENBQUNFLENBQUMsQ0FBQztJQUNy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