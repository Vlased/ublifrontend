{"version":3,"file":"src_pages_ProfilePage_ui_ProfilePage_tsx.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAQA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAGA;AAEA;AAEA;AACA;AAAA;AAGA;AAEA;AAAA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AAAA;AAEA;AAIA;AAAA;AAEA;AACA;AACA;AAAA;AAEA;AAGA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AAGA;AAlDA;AAoDA;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AAAA;AAAA;AAYA;AAIA;AAFA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CA;AAEA;AAAA;AAAA;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://ulbi/./src/pages/ProfilePage/model/selectors/getProfileError/getProfileError.ts","webpack://ulbi/./src/pages/ProfilePage/model/selectors/getProfileLoading/getProfileLoading.ts","webpack://ulbi/./src/pages/ProfilePage/model/selectors/getProfileReadonly/getProfileReadonly.ts","webpack://ulbi/./src/pages/ProfilePage/model/selectors/getProfileValidateErrors/getProfileValidateErrors.ts","webpack://ulbi/./src/pages/ProfilePage/ui/ProfilePage.tsx","webpack://ulbi/./src/pages/ProfilePage/ui/ProfilePageHeader/ProfilePageHeader.tsx","webpack://ulbi/./src/shared/lib/components/DynamicModuleLoader/DynamicModuleLoader.tsx","webpack://ulbi/./src/shared/lib/hooks/useAppDispatch.ts","webpack://ulbi/./src/pages/ProfilePage/ui/ProfilePageHeader/ProfilePageHeader.module.scss","webpack://ulbi/./src/pages/ProfilePage/ui/ProfilePageHeader/ProfilePageHeader.module.scss?56a0"],"sourcesContent":["import { StateSchema } from 'app/providers/StoreProvider'\n\nexport const getProfileError = (state: StateSchema) => state.profile?.error\n","import { StateSchema } from 'app/providers/StoreProvider'\n\nexport const getProfileLoading = (state: StateSchema) => state.profile?.isLoading\n","import { StateSchema } from 'app/providers/StoreProvider'\n\nexport const getProfileReadonly = (state: StateSchema) => state.profile?.readonly\n","import { StateSchema } from 'app/providers/StoreProvider'\n\nexport const getProfileValidateErrors = (state: StateSchema) => state.profile?.validateErrors\n","import { fetchProfileData } from '../model/services/fetchProfileData/fetchProfileData'\nimport { memo, useCallback, useEffect } from 'react'\nimport DynamicModuleLoader, { ReducersList } from 'shared/lib/components/DynamicModuleLoader/DynamicModuleLoader'\nimport { useAppDispatch } from 'shared/lib/hooks/useAppDispatch'\nimport { useSelector } from 'react-redux'\nimport { getProfileError } from '../model/selectors/getProfileError/getProfileError'\nimport { getProfileLoading } from '../model/selectors/getProfileLoading/getProfileLoading'\nimport ProfilePageHeader from './ProfilePageHeader/ProfilePageHeader'\nimport { getProfileReadonly } from '../model/selectors/getProfileReadonly/getProfileReadonly'\nimport { getProfileForm } from '../model/selectors/getProfileForm/getProfileForm'\nimport { profileActions, profileReducer } from '../model/slice/profileSlice'\nimport { ProfileCard } from '../../../entities/Profile'\nimport { Currency } from 'entities/Currency'\nimport { Country } from 'entities/Country'\nimport { getProfileValidateErrors } from '../model/selectors/getProfileValidateErrors/getProfileValidateErrors'\nimport { Text, TextTheme } from 'shared/ui/Text/Text'\nimport { ValidateProfileErrors } from '../model/types/profile'\nimport { useTranslation } from 'react-i18next'\n\nconst reducers: ReducersList = {\n  profile: profileReducer\n}\n\nconst ProfilePage = memo(() => {\n  const { t } = useTranslation()\n  const dispatch = useAppDispatch()\n  const formData = useSelector(getProfileForm)\n  const error = useSelector(getProfileError)\n  const validateErrors = useSelector(getProfileValidateErrors)\n  const isLoading = useSelector(getProfileLoading)\n  const readonly = useSelector(getProfileReadonly)\n\n  const validateErrorsTranslates = {\n    [ValidateProfileErrors.SERVER_ERROR]: t('Unknown Server Error Happened'),\n    [ValidateProfileErrors.NO_PROFILE_DATA]: t('No Profile Data Provided'),\n    [ValidateProfileErrors.INCORRECT_USER_DATA]: t('Incorrect FirstName or LastName'),\n    [ValidateProfileErrors.INCORRECT_USER_COUNTRY]: t('Incorrect Country'),\n    [ValidateProfileErrors.INCORRECT_USER_AGE]: t('Incorrect Age')\n  }\n\n  const handleFirstNameChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ firstName: value }))\n  }, [dispatch])\n\n  const handleLastNameChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ lastName: value }))\n  }, [dispatch])\n\n  const handleAgeChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ age: Number(value) }))\n  }, [dispatch])\n\n  const handleCityChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ city: value }))\n  }, [dispatch])\n\n  const handleUsernameChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ username: value }))\n  }, [dispatch])\n\n  const handleAvatarChange = useCallback((value?: string) => {\n    dispatch(profileActions.updateProfile({ avatar: value }))\n  }, [dispatch])\n\n  const handleCurrencyChange = useCallback((value?: Currency) => {\n    dispatch(profileActions.updateProfile({ currency: value }))\n  }, [dispatch])\n\n  const handleCountryChange = useCallback((value?: Country) => {\n    dispatch(profileActions.updateProfile({ country: value }))\n  }, [dispatch])\n\n  useEffect(() => {\n    if (PROJECT !== 'storybook') {\n      dispatch(fetchProfileData())\n    }\n  }, [dispatch])\n\n  return (\n    <DynamicModuleLoader\n      reducers={reducers}\n      removeAfterUnmount\n    >\n      <ProfilePageHeader />\n      {validateErrors?.map((validateError) => (\n        <Text\n          theme={TextTheme.ERROR}\n          key={validateError}\n        >\n          {validateErrorsTranslates[validateError]}\n        </Text>\n      ))}\n      <ProfileCard\n        formData={formData}\n        error={error}\n        isLoading={isLoading}\n        readonly={readonly}\n        handleFirstNameChange={handleFirstNameChange}\n        handleLastNameChange={handleLastNameChange}\n        handleAgeChange={handleAgeChange}\n        handleCityChange={handleCityChange}\n        handleUsernameChange={handleUsernameChange}\n        handleAvatarChange={handleAvatarChange}\n        handleCurrencyChange={handleCurrencyChange}\n        handleCountryChange={handleCountryChange}\n      />\n    </DynamicModuleLoader>\n  )\n})\n\nexport default ProfilePage\n","import { profileActions } from '../../model/slice/profileSlice'\nimport { getProfileReadonly } from 'pages/ProfilePage/model/selectors/getProfileReadonly/getProfileReadonly'\nimport { useCallback } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { useSelector } from 'react-redux'\nimport { useAppDispatch } from 'shared/lib/hooks/useAppDispatch'\nimport { Button, ButtonTheme } from 'shared/ui/Button/Button'\nimport { Text } from 'shared/ui/Text/Text'\nimport styles from './ProfilePageHeader.module.scss'\nimport { updateProfileData } from 'pages/ProfilePage/model/services/updateProfileData/updateProfileData'\n\nconst ProfilePageHeader = () => {\n  const { t } = useTranslation()\n  const dispatch = useAppDispatch()\n  const readonly = useSelector(getProfileReadonly)\n\n  const handleEdit = useCallback(() => {\n    dispatch(profileActions.setReadonly(false))\n  }, [dispatch])\n\n  const handleCancel = useCallback(() => {\n    dispatch(profileActions.cancelEdit())\n  }, [dispatch])\n\n  const handleSave = useCallback(() => {\n    dispatch(updateProfileData())\n  }, [dispatch])\n\n  return (\n    <div className={styles.header}>\n      <Text title={t('Profile')} />\n      {readonly\n        ? (\n          <Button\n            theme={ButtonTheme.OUTLINED}\n            className={styles.editButton}\n            onClick={handleEdit}\n          >\n            {t('Edit')}\n          </Button>\n        )\n        : (\n          <div className={styles.editActionsButtonsContainer}>\n            <Button\n              theme={ButtonTheme.OUTLINED}\n              className={styles.editButton}\n              onClick={handleSave}\n            >\n              {t('Save')}\n            </Button>\n            <Button\n              theme={ButtonTheme.OUTLINED_RED}\n              className={styles.editButton}\n              onClick={handleCancel}\n            >\n              {t('Cancel')}\n            </Button>\n          </div>\n        )}\n    </div>\n  )\n}\n\nexport default ProfilePageHeader\n","import { Reducer } from '@reduxjs/toolkit'\nimport { ReduxStoreWithManager, StateSchemaKey } from 'app/providers/StoreProvider'\nimport React, { useEffect } from 'react'\nimport { useStore } from 'react-redux'\nimport { useAppDispatch } from 'shared/lib/hooks/useAppDispatch'\n\nexport type ReducersList = {\n  [name in StateSchemaKey]?: Reducer;\n}\n\ninterface DynamicModuleLoaderProps {\n  children: React.ReactNode\n  reducers: ReducersList\n  removeAfterUnmount?: boolean\n}\n\nconst DynamicModuleLoader: React.FC<DynamicModuleLoaderProps> = ({\n  children,\n  reducers,\n  removeAfterUnmount\n}) => {\n  const store = useStore() as ReduxStoreWithManager\n  const dispatch = useAppDispatch()\n\n  useEffect(() => {\n    Object.entries(reducers).forEach(([name, reducer]) => {\n      store.reducerManager.add(name as StateSchemaKey, reducer)\n      dispatch({ type: `@INIT ${name} reducer` })\n    })\n\n    return () => {\n      if (removeAfterUnmount) {\n        Object.entries(reducers).forEach(([name]) => {\n          store.reducerManager.remove(name as StateSchemaKey)\n          dispatch({ type: `@DESTROY ${name} reducer` })\n        })\n      }\n    }\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <>\n      {children}\n    </>\n  )\n}\n\nexport default DynamicModuleLoader\n","import { AppDispatch } from 'app/providers/StoreProvider'\nimport { useDispatch } from 'react-redux'\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__header--BhPkj {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__editButton--pRpry {\n  margin-left: auto;\n  margin-bottom: 20px;\n}\n\n.src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__editActionsButtonsContainer--xLN1w {\n  display: flex;\n  gap: 10px;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/ProfilePage/ui/ProfilePageHeader/ProfilePageHeader.module.scss\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAA;EACA,8BAAA;EACA,mBAAA;AACF;;AAEA;EACE,iBAAA;EACA,mBAAA;AACF;;AAEA;EACE,aAAA;EACA,SAAA;AACF\",\"sourcesContent\":[\".header {\\n  display: flex;\\n  justify-content: space-between;\\n  margin-bottom: 20px;\\n}\\n\\n.editButton {\\n  margin-left: auto;\\n  margin-bottom: 20px;\\n}\\n\\n.editActionsButtonsContainer {\\n  display: flex;\\n  gap: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"header\": `src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__header--BhPkj`,\n\t\"editButton\": `src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__editButton--pRpry`,\n\t\"editActionsButtonsContainer\": `src-pages-ProfilePage-ui-ProfilePageHeader-ProfilePageHeader-module__editActionsButtonsContainer--xLN1w`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ProfilePageHeader.module.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n  var p;\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (!a[p]) {\n      return false;\n    }\n  }\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ProfilePageHeader.module.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[13].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./ProfilePageHeader.module.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}