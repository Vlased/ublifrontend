{"version":3,"file":"main.8602904920d16e944413.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AADA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACvBA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA","sources":["webpack://ulbi/./src/pages/ProfilePage/model/services/updateProfileData/updateProfileData.ts","webpack://ulbi/./src/pages/ProfilePage/model/services/validateProfileData/validateProfile.ts"],"sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit'\nimport { ThunkConfig } from 'app/providers/StoreProvider'\nimport { getProfileForm } from '../../selectors/getProfileForm/getProfileForm'\nimport { Profile, ValidateProfileErrors } from '../../types/profile'\nimport { validateProfile } from '../validateProfileData/validateProfile'\n\nexport const updateProfileData = createAsyncThunk<Profile, void, ThunkConfig<ValidateProfileErrors[]>>(\n  'profile/updateProfileData',\n  async (_, { extra, rejectWithValue, getState }) => {\n    try {\n      const formData = getProfileForm(getState())\n\n      const errors = validateProfile(formData);\n\n      if(errors.length) {\n        return rejectWithValue(errors)\n      }\n\n      const response = await extra.api.put<Profile>('/profile', formData)\n      return response.data\n    } catch (e) {\n      return rejectWithValue([ValidateProfileErrors.SERVER_ERROR])\n    }\n  }\n)\n","import { Profile, ValidateProfileErrors } from \"../../types/profile\";\n\nexport const validateProfile = (profile?: Profile) => {\n  if(!profile) {\n    return [ValidateProfileErrors.NO_PROFILE_DATA]\n  }\n\n  const { firstName, lastName, age, country } = profile;\n  const errors: ValidateProfileErrors[] = [];\n\n  if(!firstName || !lastName) {\n    errors.push(ValidateProfileErrors.INCORRECT_USER_DATA)\n  }\n\n  if(!age || !Number.isInteger(age)) {\n    errors.push(ValidateProfileErrors.INCORRECT_USER_AGE)\n  }\n\n  if(!country) {\n    errors.push(ValidateProfileErrors.INCORRECT_USER_COUNTRY)\n  }\n\n  return errors;\n}"],"names":[],"sourceRoot":""}